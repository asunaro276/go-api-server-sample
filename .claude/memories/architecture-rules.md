# アーキテクチャルール（コーディング指針）

このファイルは、Claude Codeがコードを作成・編集する際に遵守すべきアーキテクチャルールを定義します。

## レイヤー間の依存関係ルール

```
Controller → UseCase → Domain
                ↓
        Infrastructure
```

### 絶対遵守事項

1. **内側への依存のみ許可**: 外側の層から内側の層への依存のみ許可
2. **抽象化による依存性逆転**: Infrastructure層への依存はインターフェース経由
3. **Domain層の独立性**: Domain層は他の層に依存しない

### 禁止事項（アーキテクチャ違反）

- **Domain層からの外部ライブラリ直接使用**
- **UseCase層からInfrastructure層の具象クラス直接使用**
- **Controller層からDomain層の直接使用**（UseCase経由必須）

## ファイル分割原則

### UseCase層の分割ルール

- **1ユースケース1ファイル**を厳守
- 複数の操作を含む大きなファイルは分割する
- ファイル名：動作を表す動詞 + 対象オブジェクト
  - 例：`getuser.go`, `createuser.go`, `updateuser.go`

## コードレビューポイント

### 必須チェック項目
- import文での依存関係チェック
- インターフェースの適切な定義
- 責務の分離が適切に行われているか
- 1ユースケース1ファイルが守られているか
- ファイル内依存関係インターフェースが定義されているか
