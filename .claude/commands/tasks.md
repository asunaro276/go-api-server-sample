---
description: 利用可能な設計成果物に基づいて、機能のための実行可能で依存関係順に並んだtasks.mdを生成します。
---

ユーザー入力は、エージェントから直接提供されるか、`$ARGUMENTS`に含まれます - プロンプトを進める前に（空でない場合は）必ず考慮する**必要があります**。

ユーザー入力:

$ARGUMENTS

1. リポジトリルートから `.specify/scripts/bash/check-prerequisites.sh --json` を実行し、FEATURE_DIRとAVAILABLE_DOCSリストを解析します。すべてのパスは絶対パスである必要があります。
2. 利用可能な設計ドキュメントを読み込み、分析します：
   - plan.mdを必ず読み取り、技術スタックとライブラリを確認
   - 存在する場合：data-model.mdを読み取り、エンティティを確認
   - 存在する場合：contracts/を読み取り、APIエンドポイントを確認
   - 存在する場合：research.mdを読み取り、技術的決定を確認
   - 存在する場合：quickstart.mdを読み取り、テストシナリオを確認

   注意：すべてのプロジェクトがすべてのドキュメントを持つわけではありません。例：
   - CLIツールにはcontracts/がない場合があります
   - シンプルなライブラリにはdata-model.mdが不要な場合があります
   - 利用可能なものに基づいてタスクを生成します

3. テンプレートに従ってタスクを生成します：
   - `.specify/templates/tasks-template.md` をベースとして使用
   - サンプルタスクを実際のタスクに置き換え、以下に基づいて：
     * **セットアップタスク**: プロジェクト初期化、依存関係、リンティング
     * **テストタスク [P]**: 契約ごとに1つ、統合シナリオごとに1つ
     * **コアタスク**: エンティティ、サービス、CLIコマンド、エンドポイントごとに1つ
     * **統合タスク**: DB接続、ミドルウェア、ログ
     * **仕上げタスク [P]**: 単体テスト、パフォーマンス、ドキュメント

4. タスク生成ルール：
   - 各契約ファイル → [P]マーク付きの契約テストタスク
   - data-model内の各エンティティ → [P]マーク付きのモデル作成タスク
   - 各エンドポイント → 実装タスク（共有ファイルの場合は並列不可）
   - 各ユーザーストーリー → [P]マーク付きの統合テスト
   - 異なるファイル = 並列可能 [P]
   - 同じファイル = 順次実行（[P]なし）

5. 依存関係によるタスクの順序付け：
   - セットアップをすべての前に
   - 実装前にテスト（TDD）
   - サービス前にモデル
   - エンドポイント前にサービス
   - 統合前にコア
   - 仕上げをすべての後に

6. 並列実行例を含める：
   - 一緒に実行できる[P]タスクをグループ化
   - 実際のTaskエージェントコマンドを表示

7. FEATURE_DIR/tasks.mdを作成、以下を含む：
   - 実装計画からの正しい機能名
   - 番号付きタスク（T001、T002など）
   - 各タスクの明確なファイルパス
   - 依存関係の注記
   - 並列実行ガイダンス

タスク生成のコンテキスト：$ARGUMENTS

tasks.mdは即座に実行可能である必要があります - 各タスクは、LLMが追加のコンテキストなしで完了できるほど具体的でなければなりません。
